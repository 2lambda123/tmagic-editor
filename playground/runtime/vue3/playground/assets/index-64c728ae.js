var ar=Object.defineProperty;var cr=(t,n,e)=>n in t?ar(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var y=(t,n,e)=>(cr(t,typeof n!="symbol"?n+"":n,e),e),_e=(t,n,e)=>{if(!n.has(t))throw TypeError("Cannot "+e)};var U=(t,n,e)=>(_e(t,n,"read from private field"),e?e.call(t):n.get(t)),z=(t,n,e)=>{if(n.has(t))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(t):n.set(t,e)},tt=(t,n,e,r)=>(_e(t,n,"write to private field"),r?r.call(t,e):n.set(t,e),e);function _u(){import.meta.url,import("_").catch(()=>1);async function*t(){}}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=e(i);fetch(i.href,s)}})();const ur="modulepreload",fr=function(t){return"/tmagic-editor/playground/runtime/vue3/playground/"+t},we={},Zt=function(n,e,r){if(!e||e.length===0)return n();const i=document.getElementsByTagName("link");return Promise.all(e.map(s=>{if(s=fr(s),s in we)return;we[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let l=i.length-1;l>=0;l--){const f=i[l];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(s,'"]').concat(a)))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":ur,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((l,f)=>{u.addEventListener("load",l),u.addEventListener("error",()=>f(new Error("Unable to preload CSS for ".concat(s))))})})).then(()=>n()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var un=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ie(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var se={exports:{}},ut=typeof Reflect=="object"?Reflect:null,Oe=ut&&typeof ut.apply=="function"?ut.apply:function(n,e,r){return Function.prototype.apply.call(n,e,r)},Lt;ut&&typeof ut.ownKeys=="function"?Lt=ut.ownKeys:Object.getOwnPropertySymbols?Lt=function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Lt=function(n){return Object.getOwnPropertyNames(n)};function hr(t){console&&console.warn&&console.warn(t)}var fn=Number.isNaN||function(n){return n!==n};function O(){O.init.call(this)}se.exports=O;se.exports.once=gr;O.EventEmitter=O;O.prototype._events=void 0;O.prototype._eventsCount=0;O.prototype._maxListeners=void 0;var Se=10;function Ht(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(O,"defaultMaxListeners",{enumerable:!0,get:function(){return Se},set:function(t){if(typeof t!="number"||t<0||fn(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Se=t}});O.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};O.prototype.setMaxListeners=function(n){if(typeof n!="number"||n<0||fn(n))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+n+".");return this._maxListeners=n,this};function hn(t){return t._maxListeners===void 0?O.defaultMaxListeners:t._maxListeners}O.prototype.getMaxListeners=function(){return hn(this)};O.prototype.emit=function(n){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var i=n==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[n];if(c===void 0)return!1;if(typeof c=="function")Oe(c,this,e);else for(var u=c.length,l=yn(c,u),r=0;r<u;++r)Oe(l[r],this,e);return!0};function dn(t,n,e,r){var i,s,o;if(Ht(e),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",n,e.listener?e.listener:e),s=t._events),o=s[n]),o===void 0)o=s[n]=e,++t._eventsCount;else if(typeof o=="function"?o=s[n]=r?[e,o]:[o,e]:r?o.unshift(e):o.push(e),i=hn(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(n)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=n,a.count=o.length,hr(a)}return t}O.prototype.addListener=function(n,e){return dn(this,n,e,!1)};O.prototype.on=O.prototype.addListener;O.prototype.prependListener=function(n,e){return dn(this,n,e,!0)};function dr(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ln(t,n,e){var r={fired:!1,wrapFn:void 0,target:t,type:n,listener:e},i=dr.bind(r);return i.listener=e,r.wrapFn=i,i}O.prototype.once=function(n,e){return Ht(e),this.on(n,ln(this,n,e)),this};O.prototype.prependOnceListener=function(n,e){return Ht(e),this.prependListener(n,ln(this,n,e)),this};O.prototype.removeListener=function(n,e){var r,i,s,o,a;if(Ht(e),i=this._events,i===void 0)return this;if(r=i[n],r===void 0)return this;if(r===e||r.listener===e)--this._eventsCount===0?this._events=Object.create(null):(delete i[n],i.removeListener&&this.emit("removeListener",n,r.listener||e));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():lr(r,s),r.length===1&&(i[n]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",n,a||e)}return this};O.prototype.off=O.prototype.removeListener;O.prototype.removeAllListeners=function(n){var e,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[n]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[n]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(e=r[n],typeof e=="function")this.removeListener(n,e);else if(e!==void 0)for(i=e.length-1;i>=0;i--)this.removeListener(n,e[i]);return this};function pn(t,n,e){var r=t._events;if(r===void 0)return[];var i=r[n];return i===void 0?[]:typeof i=="function"?e?[i.listener||i]:[i]:e?pr(i):yn(i,i.length)}O.prototype.listeners=function(n){return pn(this,n,!0)};O.prototype.rawListeners=function(n){return pn(this,n,!1)};O.listenerCount=function(t,n){return typeof t.listenerCount=="function"?t.listenerCount(n):gn.call(t,n)};O.prototype.listenerCount=gn;function gn(t){var n=this._events;if(n!==void 0){var e=n[t];if(typeof e=="function")return 1;if(e!==void 0)return e.length}return 0}O.prototype.eventNames=function(){return this._eventsCount>0?Lt(this._events):[]};function yn(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t[r];return e}function lr(t,n){for(;n+1<t.length;n++)t[n]=t[n+1];t.pop()}function pr(t){for(var n=new Array(t.length),e=0;e<n.length;++e)n[e]=t[e].listener||t[e];return n}function gr(t,n){return new Promise(function(e,r){function i(o){t.removeListener(n,s),r(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),e([].slice.call(arguments))}mn(t,n,s,{once:!0}),n!=="error"&&yr(t,i,{once:!0})})}function yr(t,n,e){typeof t.on=="function"&&mn(t,"error",n,e)}function mn(t,n,e,r){if(typeof t.on=="function")r.once?t.once(n,e):t.on(n,e);else if(typeof t.addEventListener=="function")t.addEventListener(n,function i(s){r.once&&t.removeEventListener(n,i),e(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var oe=se.exports;const vn=ie(oe);var mr=typeof global=="object"&&global&&global.Object===Object&&global;const bn=mr;var vr=typeof self=="object"&&self&&self.Object===Object&&self,br=bn||vr||Function("return this")();const W=br;var $r=W.Symbol;const k=$r;var $n=Object.prototype,_r=$n.hasOwnProperty,wr=$n.toString,mt=k?k.toStringTag:void 0;function Or(t){var n=_r.call(t,mt),e=t[mt];try{t[mt]=void 0;var r=!0}catch(s){}var i=wr.call(t);return r&&(n?t[mt]=e:delete t[mt]),i}var Sr=Object.prototype,Tr=Sr.toString;function Er(t){return Tr.call(t)}var jr="[object Null]",Ar="[object Undefined]",Te=k?k.toStringTag:void 0;function J(t){return t==null?t===void 0?Ar:jr:Te&&Te in Object(t)?Or(t):Er(t)}function q(t){return t!=null&&typeof t=="object"}var Mr="[object Symbol]";function ae(t){return typeof t=="symbol"||q(t)&&J(t)==Mr}function _n(t,n){for(var e=-1,r=t==null?0:t.length,i=Array(r);++e<r;)i[e]=n(t[e],e,t);return i}var Cr=Array.isArray;const Y=Cr;var Dr=1/0,Ee=k?k.prototype:void 0,je=Ee?Ee.toString:void 0;function wn(t){if(typeof t=="string")return t;if(Y(t))return _n(t,wn)+"";if(ae(t))return je?je.call(t):"";var n=t+"";return n=="0"&&1/t==-Dr?"-0":n}function lt(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}function On(t){return t}var Lr="[object AsyncFunction]",Pr="[object Function]",xr="[object GeneratorFunction]",Ir="[object Proxy]";function Sn(t){if(!lt(t))return!1;var n=J(t);return n==Pr||n==xr||n==Lr||n==Ir}var Nr=W["__core-js_shared__"];const Jt=Nr;var Ae=function(){var t=/[^.]+$/.exec(Jt&&Jt.keys&&Jt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Rr(t){return!!Ae&&Ae in t}var Fr=Function.prototype,Ur=Fr.toString;function it(t){if(t!=null){try{return Ur.call(t)}catch(n){}try{return t+""}catch(n){}}return""}var Hr=/[\\^$.*+?()[\]{}|]/g,kr=/^\[object .+?Constructor\]$/,Wr=Function.prototype,Br=Object.prototype,zr=Wr.toString,qr=Br.hasOwnProperty,Yr=RegExp("^"+zr.call(qr).replace(Hr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Gr(t){if(!lt(t)||Rr(t))return!1;var n=Sn(t)?Yr:kr;return n.test(it(t))}function Kr(t,n){return t==null?void 0:t[n]}function st(t,n){var e=Kr(t,n);return Gr(e)?e:void 0}var Vr=st(W,"WeakMap");const te=Vr;var Me=Object.create,Zr=function(){function t(){}return function(n){if(!lt(n))return{};if(Me)return Me(n);t.prototype=n;var e=new t;return t.prototype=void 0,e}}();const Jr=Zr;function Tn(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)}function Qr(){}function Xr(t,n){var e=-1,r=t.length;for(n||(n=Array(r));++e<r;)n[e]=t[e];return n}var ti=800,ei=16,ni=Date.now;function ri(t){var n=0,e=0;return function(){var r=ni(),i=ei-(r-e);if(e=r,i>0){if(++n>=ti)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}function ii(t){return function(){return t}}var si=function(){try{var t=st(Object,"defineProperty");return t({},"",{}),t}catch(n){}}();const It=si;var oi=It?function(t,n){return It(t,"toString",{configurable:!0,enumerable:!1,value:ii(n),writable:!0})}:On;const ai=oi;var ci=ri(ai);const ui=ci;function fi(t,n){for(var e=-1,r=t==null?0:t.length;++e<r&&n(t[e],e,t)!==!1;);return t}function hi(t,n,e,r){for(var i=t.length,s=e+(r?1:-1);r?s--:++s<i;)if(n(t[s],s,t))return s;return-1}function di(t){return t!==t}function li(t,n,e){for(var r=e-1,i=t.length;++r<i;)if(t[r]===n)return r;return-1}function pi(t,n,e){return n===n?li(t,n,e):hi(t,di,e)}function gi(t,n){var e=t==null?0:t.length;return!!e&&pi(t,n,0)>-1}var yi=9007199254740991,mi=/^(?:0|[1-9]\d*)$/;function ce(t,n){var e=typeof t;return n=n==null?yi:n,!!n&&(e=="number"||e!="symbol"&&mi.test(t))&&t>-1&&t%1==0&&t<n}function En(t,n,e){n=="__proto__"&&It?It(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}function kt(t,n){return t===n||t!==t&&n!==n}var vi=Object.prototype,bi=vi.hasOwnProperty;function jn(t,n,e){var r=t[n];(!(bi.call(t,n)&&kt(r,e))||e===void 0&&!(n in t))&&En(t,n,e)}function Et(t,n,e,r){var i=!e;e||(e={});for(var s=-1,o=n.length;++s<o;){var a=n[s],c=r?r(e[a],t[a],a,e,t):void 0;c===void 0&&(c=t[a]),i?En(e,a,c):jn(e,a,c)}return e}var Ce=Math.max;function $i(t,n,e){return n=Ce(n===void 0?t.length-1:n,0),function(){for(var r=arguments,i=-1,s=Ce(r.length-n,0),o=Array(s);++i<s;)o[i]=r[n+i];i=-1;for(var a=Array(n+1);++i<n;)a[i]=r[i];return a[n]=e(o),Tn(t,this,a)}}function ue(t,n){return ui($i(t,n,On),t+"")}var _i=9007199254740991;function fe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=_i}function jt(t){return t!=null&&fe(t.length)&&!Sn(t)}function An(t,n,e){if(!lt(e))return!1;var r=typeof n;return(r=="number"?jt(e)&&ce(n,e.length):r=="string"&&n in e)?kt(e[n],t):!1}function wi(t){return ue(function(n,e){var r=-1,i=e.length,s=i>1?e[i-1]:void 0,o=i>2?e[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,o&&An(e[0],e[1],o)&&(s=i<3?void 0:s,i=1),n=Object(n);++r<i;){var a=e[r];a&&t(n,a,r,s)}return n})}var Oi=Object.prototype;function Wt(t){var n=t&&t.constructor,e=typeof n=="function"&&n.prototype||Oi;return t===e}function Si(t,n){for(var e=-1,r=Array(t);++e<t;)r[e]=n(e);return r}var Ti="[object Arguments]";function De(t){return q(t)&&J(t)==Ti}var Mn=Object.prototype,Ei=Mn.hasOwnProperty,ji=Mn.propertyIsEnumerable,Ai=De(function(){return arguments}())?De:function(t){return q(t)&&Ei.call(t,"callee")&&!ji.call(t,"callee")};const Bt=Ai;function Mi(){return!1}var Cn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Le=Cn&&typeof module=="object"&&module&&!module.nodeType&&module,Ci=Le&&Le.exports===Cn,Pe=Ci?W.Buffer:void 0,Di=Pe?Pe.isBuffer:void 0,Li=Di||Mi;const he=Li;var Pi="[object Arguments]",xi="[object Array]",Ii="[object Boolean]",Ni="[object Date]",Ri="[object Error]",Fi="[object Function]",Ui="[object Map]",Hi="[object Number]",ki="[object Object]",Wi="[object RegExp]",Bi="[object Set]",zi="[object String]",qi="[object WeakMap]",Yi="[object ArrayBuffer]",Gi="[object DataView]",Ki="[object Float32Array]",Vi="[object Float64Array]",Zi="[object Int8Array]",Ji="[object Int16Array]",Qi="[object Int32Array]",Xi="[object Uint8Array]",ts="[object Uint8ClampedArray]",es="[object Uint16Array]",ns="[object Uint32Array]",A={};A[Ki]=A[Vi]=A[Zi]=A[Ji]=A[Qi]=A[Xi]=A[ts]=A[es]=A[ns]=!0;A[Pi]=A[xi]=A[Yi]=A[Ii]=A[Gi]=A[Ni]=A[Ri]=A[Fi]=A[Ui]=A[Hi]=A[ki]=A[Wi]=A[Bi]=A[zi]=A[qi]=!1;function rs(t){return q(t)&&fe(t.length)&&!!A[J(t)]}function de(t){return function(n){return t(n)}}var Dn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,vt=Dn&&typeof module=="object"&&module&&!module.nodeType&&module,is=vt&&vt.exports===Dn,Qt=is&&bn.process,ss=function(){try{var t=vt&&vt.require&&vt.require("util").types;return t||Qt&&Qt.binding&&Qt.binding("util")}catch(n){}}();const dt=ss;var xe=dt&&dt.isTypedArray,os=xe?de(xe):rs;const Ln=os;var as=Object.prototype,cs=as.hasOwnProperty;function Pn(t,n){var e=Y(t),r=!e&&Bt(t),i=!e&&!r&&he(t),s=!e&&!r&&!i&&Ln(t),o=e||r||i||s,a=o?Si(t.length,String):[],c=a.length;for(var u in t)(n||cs.call(t,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||ce(u,c)))&&a.push(u);return a}function xn(t,n){return function(e){return t(n(e))}}var us=xn(Object.keys,Object);const fs=us;var hs=Object.prototype,ds=hs.hasOwnProperty;function In(t){if(!Wt(t))return fs(t);var n=[];for(var e in Object(t))ds.call(t,e)&&e!="constructor"&&n.push(e);return n}function zt(t){return jt(t)?Pn(t):In(t)}function ls(t){var n=[];if(t!=null)for(var e in Object(t))n.push(e);return n}var ps=Object.prototype,gs=ps.hasOwnProperty;function ys(t){if(!lt(t))return ls(t);var n=Wt(t),e=[];for(var r in t)r=="constructor"&&(n||!gs.call(t,r))||e.push(r);return e}function qt(t){return jt(t)?Pn(t,!0):ys(t)}var ms=wi(function(t,n,e,r){Et(n,qt(n),t,r)});const Ie=ms;var vs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bs=/^\w*$/;function $s(t,n){if(Y(t))return!1;var e=typeof t;return e=="number"||e=="symbol"||e=="boolean"||t==null||ae(t)?!0:bs.test(t)||!vs.test(t)||n!=null&&t in Object(n)}var _s=st(Object,"create");const $t=_s;function ws(){this.__data__=$t?$t(null):{},this.size=0}function Os(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}var Ss="__lodash_hash_undefined__",Ts=Object.prototype,Es=Ts.hasOwnProperty;function js(t){var n=this.__data__;if($t){var e=n[t];return e===Ss?void 0:e}return Es.call(n,t)?n[t]:void 0}var As=Object.prototype,Ms=As.hasOwnProperty;function Cs(t){var n=this.__data__;return $t?n[t]!==void 0:Ms.call(n,t)}var Ds="__lodash_hash_undefined__";function Ls(t,n){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=$t&&n===void 0?Ds:n,this}function rt(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}rt.prototype.clear=ws;rt.prototype.delete=Os;rt.prototype.get=js;rt.prototype.has=Cs;rt.prototype.set=Ls;function Ps(){this.__data__=[],this.size=0}function Yt(t,n){for(var e=t.length;e--;)if(kt(t[e][0],n))return e;return-1}var xs=Array.prototype,Is=xs.splice;function Ns(t){var n=this.__data__,e=Yt(n,t);if(e<0)return!1;var r=n.length-1;return e==r?n.pop():Is.call(n,e,1),--this.size,!0}function Rs(t){var n=this.__data__,e=Yt(n,t);return e<0?void 0:n[e][1]}function Fs(t){return Yt(this.__data__,t)>-1}function Us(t,n){var e=this.__data__,r=Yt(e,t);return r<0?(++this.size,e.push([t,n])):e[r][1]=n,this}function G(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}G.prototype.clear=Ps;G.prototype.delete=Ns;G.prototype.get=Rs;G.prototype.has=Fs;G.prototype.set=Us;var Hs=st(W,"Map");const _t=Hs;function ks(){this.size=0,this.__data__={hash:new rt,map:new(_t||G),string:new rt}}function Ws(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function Gt(t,n){var e=t.__data__;return Ws(n)?e[typeof n=="string"?"string":"hash"]:e.map}function Bs(t){var n=Gt(this,t).delete(t);return this.size-=n?1:0,n}function zs(t){return Gt(this,t).get(t)}function qs(t){return Gt(this,t).has(t)}function Ys(t,n){var e=Gt(this,t),r=e.size;return e.set(t,n),this.size+=e.size==r?0:1,this}function K(t){var n=-1,e=t==null?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}K.prototype.clear=ks;K.prototype.delete=Bs;K.prototype.get=zs;K.prototype.has=qs;K.prototype.set=Ys;var Gs="Expected a function";function le(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new TypeError(Gs);var e=function(){var r=arguments,i=n?n.apply(this,r):r[0],s=e.cache;if(s.has(i))return s.get(i);var o=t.apply(this,r);return e.cache=s.set(i,o)||s,o};return e.cache=new(le.Cache||K),e}le.Cache=K;var Ks=500;function Vs(t){var n=le(t,function(r){return e.size===Ks&&e.clear(),r}),e=n.cache;return n}var Zs=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Js=/\\(\\)?/g,Qs=Vs(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(Zs,function(e,r,i,s){n.push(i?s.replace(Js,"$1"):r||e)}),n});const Xs=Qs;function pe(t){return t==null?"":wn(t)}function to(t,n){return Y(t)?t:$s(t,n)?[t]:Xs(pe(t))}var eo=1/0;function no(t){if(typeof t=="string"||ae(t))return t;var n=t+"";return n=="0"&&1/t==-eo?"-0":n}function ge(t,n){for(var e=-1,r=n.length,i=t.length;++e<r;)t[i+e]=n[e];return t}var Ne=k?k.isConcatSpreadable:void 0;function ro(t){return Y(t)||Bt(t)||!!(Ne&&t&&t[Ne])}function Nn(t,n,e,r,i){var s=-1,o=t.length;for(e||(e=ro),i||(i=[]);++s<o;){var a=t[s];n>0&&e(a)?n>1?Nn(a,n-1,e,r,i):ge(i,a):r||(i[i.length]=a)}return i}var io=xn(Object.getPrototypeOf,Object);const ye=io;var so="[object Object]",oo=Function.prototype,ao=Object.prototype,Rn=oo.toString,co=ao.hasOwnProperty,uo=Rn.call(Object);function fo(t){if(!q(t)||J(t)!=so)return!1;var n=ye(t);if(n===null)return!0;var e=co.call(n,"constructor")&&n.constructor;return typeof e=="function"&&e instanceof e&&Rn.call(e)==uo}var ho="[object DOMException]",lo="[object Error]";function Fn(t){if(!q(t))return!1;var n=J(t);return n==lo||n==ho||typeof t.message=="string"&&typeof t.name=="string"&&!fo(t)}var po=ue(function(t,n){try{return Tn(t,void 0,n)}catch(e){return Fn(e)?e:new Error(e)}});const go=po;function yo(t){return function(n){return t==null?void 0:t[n]}}function mo(){this.__data__=new G,this.size=0}function vo(t){var n=this.__data__,e=n.delete(t);return this.size=n.size,e}function bo(t){return this.__data__.get(t)}function $o(t){return this.__data__.has(t)}var _o=200;function wo(t,n){var e=this.__data__;if(e instanceof G){var r=e.__data__;if(!_t||r.length<_o-1)return r.push([t,n]),this.size=++e.size,this;e=this.__data__=new K(r)}return e.set(t,n),this.size=e.size,this}function pt(t){var n=this.__data__=new G(t);this.size=n.size}pt.prototype.clear=mo;pt.prototype.delete=vo;pt.prototype.get=bo;pt.prototype.has=$o;pt.prototype.set=wo;function Oo(t,n){return t&&Et(n,zt(n),t)}function So(t,n){return t&&Et(n,qt(n),t)}var Un=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Re=Un&&typeof module=="object"&&module&&!module.nodeType&&module,To=Re&&Re.exports===Un,Fe=To?W.Buffer:void 0,Ue=Fe?Fe.allocUnsafe:void 0;function Eo(t,n){if(n)return t.slice();var e=t.length,r=Ue?Ue(e):new t.constructor(e);return t.copy(r),r}function jo(t,n){for(var e=-1,r=t==null?0:t.length,i=0,s=[];++e<r;){var o=t[e];n(o,e,t)&&(s[i++]=o)}return s}function Hn(){return[]}var Ao=Object.prototype,Mo=Ao.propertyIsEnumerable,He=Object.getOwnPropertySymbols,Co=He?function(t){return t==null?[]:(t=Object(t),jo(He(t),function(n){return Mo.call(t,n)}))}:Hn;const me=Co;function Do(t,n){return Et(t,me(t),n)}var Lo=Object.getOwnPropertySymbols,Po=Lo?function(t){for(var n=[];t;)ge(n,me(t)),t=ye(t);return n}:Hn;const kn=Po;function xo(t,n){return Et(t,kn(t),n)}function Wn(t,n,e){var r=n(t);return Y(t)?r:ge(r,e(t))}function Io(t){return Wn(t,zt,me)}function No(t){return Wn(t,qt,kn)}var Ro=st(W,"DataView");const ee=Ro;var Fo=st(W,"Promise");const ne=Fo;var Uo=st(W,"Set");const ft=Uo;var ke="[object Map]",Ho="[object Object]",We="[object Promise]",Be="[object Set]",ze="[object WeakMap]",qe="[object DataView]",ko=it(ee),Wo=it(_t),Bo=it(ne),zo=it(ft),qo=it(te),et=J;(ee&&et(new ee(new ArrayBuffer(1)))!=qe||_t&&et(new _t)!=ke||ne&&et(ne.resolve())!=We||ft&&et(new ft)!=Be||te&&et(new te)!=ze)&&(et=function(t){var n=J(t),e=n==Ho?t.constructor:void 0,r=e?it(e):"";if(r)switch(r){case ko:return qe;case Wo:return ke;case Bo:return We;case zo:return Be;case qo:return ze}return n});const Kt=et;var Yo=Object.prototype,Go=Yo.hasOwnProperty;function Ko(t){var n=t.length,e=new t.constructor(n);return n&&typeof t[0]=="string"&&Go.call(t,"index")&&(e.index=t.index,e.input=t.input),e}var Vo=W.Uint8Array;const Ye=Vo;function ve(t){var n=new t.constructor(t.byteLength);return new Ye(n).set(new Ye(t)),n}function Zo(t,n){var e=n?ve(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}var Jo=/\w*$/;function Qo(t){var n=new t.constructor(t.source,Jo.exec(t));return n.lastIndex=t.lastIndex,n}var Ge=k?k.prototype:void 0,Ke=Ge?Ge.valueOf:void 0;function Xo(t){return Ke?Object(Ke.call(t)):{}}function ta(t,n){var e=n?ve(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}var ea="[object Boolean]",na="[object Date]",ra="[object Map]",ia="[object Number]",sa="[object RegExp]",oa="[object Set]",aa="[object String]",ca="[object Symbol]",ua="[object ArrayBuffer]",fa="[object DataView]",ha="[object Float32Array]",da="[object Float64Array]",la="[object Int8Array]",pa="[object Int16Array]",ga="[object Int32Array]",ya="[object Uint8Array]",ma="[object Uint8ClampedArray]",va="[object Uint16Array]",ba="[object Uint32Array]";function $a(t,n,e){var r=t.constructor;switch(n){case ua:return ve(t);case ea:case na:return new r(+t);case fa:return Zo(t,e);case ha:case da:case la:case pa:case ga:case ya:case ma:case va:case ba:return ta(t,e);case ra:return new r;case ia:case aa:return new r(t);case sa:return Qo(t);case oa:return new r;case ca:return Xo(t)}}function _a(t){return typeof t.constructor=="function"&&!Wt(t)?Jr(ye(t)):{}}var wa="[object Map]";function Oa(t){return q(t)&&Kt(t)==wa}var Ve=dt&&dt.isMap,Sa=Ve?de(Ve):Oa;const Ta=Sa;var Ea="[object Set]";function ja(t){return q(t)&&Kt(t)==Ea}var Ze=dt&&dt.isSet,Aa=Ze?de(Ze):ja;const Ma=Aa;var Ca=1,Da=2,La=4,Bn="[object Arguments]",Pa="[object Array]",xa="[object Boolean]",Ia="[object Date]",Na="[object Error]",zn="[object Function]",Ra="[object GeneratorFunction]",Fa="[object Map]",Ua="[object Number]",qn="[object Object]",Ha="[object RegExp]",ka="[object Set]",Wa="[object String]",Ba="[object Symbol]",za="[object WeakMap]",qa="[object ArrayBuffer]",Ya="[object DataView]",Ga="[object Float32Array]",Ka="[object Float64Array]",Va="[object Int8Array]",Za="[object Int16Array]",Ja="[object Int32Array]",Qa="[object Uint8Array]",Xa="[object Uint8ClampedArray]",tc="[object Uint16Array]",ec="[object Uint32Array]",j={};j[Bn]=j[Pa]=j[qa]=j[Ya]=j[xa]=j[Ia]=j[Ga]=j[Ka]=j[Va]=j[Za]=j[Ja]=j[Fa]=j[Ua]=j[qn]=j[Ha]=j[ka]=j[Wa]=j[Ba]=j[Qa]=j[Xa]=j[tc]=j[ec]=!0;j[Na]=j[zn]=j[za]=!1;function Pt(t,n,e,r,i,s){var o,a=n&Ca,c=n&Da,u=n&La;if(e&&(o=i?e(t,r,i,s):e(t)),o!==void 0)return o;if(!lt(t))return t;var l=Y(t);if(l){if(o=Ko(t),!a)return Xr(t,o)}else{var f=Kt(t),_=f==zn||f==Ra;if(he(t))return Eo(t,a);if(f==qn||f==Bn||_&&!i){if(o=c||_?{}:_a(t),!a)return c?xo(t,So(o,t)):Do(t,Oo(o,t))}else{if(!j[f])return i?t:{};o=$a(t,f,a)}}s||(s=new pt);var E=s.get(t);if(E)return E;s.set(t,o),Ma(t)?t.forEach(function(S){o.add(Pt(S,n,e,S,t,s))}):Ta(t)&&t.forEach(function(S,P){o.set(P,Pt(S,n,e,P,t,s))});var D=u?c?No:Io:c?qt:zt,g=l?void 0:D(t);return fi(g||t,function(S,P){g&&(P=S,S=t[P]),jn(o,P,Pt(S,n,e,P,t,s))}),o}var nc=1,rc=4;function Yn(t){return Pt(t,nc|rc)}var ic="__lodash_hash_undefined__";function sc(t){return this.__data__.set(t,ic),this}function oc(t){return this.__data__.has(t)}function Nt(t){var n=-1,e=t==null?0:t.length;for(this.__data__=new K;++n<e;)this.add(t[n])}Nt.prototype.add=Nt.prototype.push=sc;Nt.prototype.has=oc;function ac(t,n){return t.has(n)}function Gn(t){var n=-1,e=Array(t.size);return t.forEach(function(r){e[++n]=r}),e}function cc(t,n,e){n=to(n,t);for(var r=-1,i=n.length,s=!1;++r<i;){var o=no(n[r]);if(!(s=t!=null&&e(t,o)))break;t=t[o]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&fe(i)&&ce(o,i)&&(Y(t)||Bt(t)))}function uc(t){return q(t)&&jt(t)}function fc(t,n,e){for(var r=-1,i=t==null?0:t.length;++r<i;)if(e(n,t[r]))return!0;return!1}var hc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},dc=yo(hc);const lc=dc;var Kn=/[&<>"']/g,pc=RegExp(Kn.source);function gc(t){return t=pe(t),t&&pc.test(t)?t.replace(Kn,lc):t}var yc=Object.prototype,mc=yc.hasOwnProperty;function vc(t,n){return t!=null&&mc.call(t,n)}function bc(t,n){return t!=null&&cc(t,n,vc)}function $c(t,n){return _n(n,function(e){return t[e]})}var _c="[object Map]",wc="[object Set]",Oc=Object.prototype,Sc=Oc.hasOwnProperty;function Vn(t){if(t==null)return!0;if(jt(t)&&(Y(t)||typeof t=="string"||typeof t.splice=="function"||he(t)||Ln(t)||Bt(t)))return!t.length;var n=Kt(t);if(n==_c||n==wc)return!t.size;if(Wt(t))return!In(t).length;for(var e in t)if(Sc.call(t,e))return!1;return!0}var Zn=Object.prototype,Tc=Zn.hasOwnProperty;function Je(t,n,e,r){return t===void 0||kt(t,Zn[e])&&!Tc.call(r,e)?n:t}var Ec={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function jc(t){return"\\"+Ec[t]}var Ac=/<%=([\s\S]+?)%>/g;const Jn=Ac;var Mc=/<%-([\s\S]+?)%>/g;const Cc=Mc;var Dc=/<%([\s\S]+?)%>/g;const Lc=Dc;var Pc={escape:Cc,evaluate:Lc,interpolate:Jn,variable:"",imports:{_:{escape:gc}}};const Qe=Pc;var xc="Invalid `variable` option passed into `_.template`",Ic=/\b__p \+= '';/g,Nc=/\b(__p \+=) '' \+/g,Rc=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Fc=/[()=,{}\[\]\/\s]/,Uc=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ct=/($^)/,Hc=/['\n\r\u2028\u2029\\]/g,kc=Object.prototype,Xe=kc.hasOwnProperty;function tn(t,n,e){var r=Qe.imports._.templateSettings||Qe;e&&An(t,n,e)&&(n=void 0),t=pe(t),n=Ie({},n,r,Je);var i=Ie({},n.imports,r.imports,Je),s=zt(i),o=$c(i,s),a,c,u=0,l=n.interpolate||Ct,f="__p += '",_=RegExp((n.escape||Ct).source+"|"+l.source+"|"+(l===Jn?Uc:Ct).source+"|"+(n.evaluate||Ct).source+"|$","g"),E=Xe.call(n,"sourceURL")?"//# sourceURL="+(n.sourceURL+"").replace(/\s/g," ")+"\n":"";t.replace(_,function(S,P,R,I,Q,F){return R||(R=I),f+=t.slice(u,F).replace(Hc,jc),P&&(a=!0,f+="' +\n__e("+P+") +\n'"),Q&&(c=!0,f+="';\n"+Q+";\n__p += '"),R&&(f+="' +\n((__t = ("+R+")) == null ? '' : __t) +\n'"),u=F+S.length,S}),f+="';\n";var D=Xe.call(n,"variable")&&n.variable;if(!D)f="with (obj) {\n"+f+"\n}\n";else if(Fc.test(D))throw new Error(xc);f=(c?f.replace(Ic,""):f).replace(Nc,"$1").replace(Rc,"$1;"),f="function("+(D||"obj")+") {\n"+(D?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(c?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=go(function(){return Function(s,E+"return "+f).apply(void 0,o)});if(g.source=f,Fn(g))throw g;return g}var Wc=1/0,Bc=ft&&1/Gn(new ft([,-0]))[1]==Wc?function(t){return new ft(t)}:Qr;const zc=Bc;var qc=200;function Yc(t,n,e){var r=-1,i=gi,s=t.length,o=!0,a=[],c=a;if(e)o=!1,i=fc;else if(s>=qc){var u=n?null:zc(t);if(u)return Gn(u);o=!1,i=ac,c=new Nt}else c=n?[]:a;t:for(;++r<s;){var l=t[r],f=n?n(l):l;if(l=e||l!==0?l:0,o&&f===f){for(var _=c.length;_--;)if(c[_]===f)continue t;n&&c.push(f),a.push(l)}else i(c,f,e)||(c!==a&&c.push(f),a.push(l))}return a}var Gc=ue(function(t){return Yc(Nn(t,1,uc,!0))});const Kc=Gc;var Qn={exports:{}};(function(t,n){(function(e,r){t.exports=r()})(un,function(){var e=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",c="hour",u="day",l="week",f="month",_="quarter",E="year",D="date",g="Invalid Date",S=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,P=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,R={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},I=function($,p,h){var m=String($);return!m||m.length>=p?$:""+Array(p+1-m.length).join(h)+$},Q={s:I,z:function($){var p=-$.utcOffset(),h=Math.abs(p),m=Math.floor(h/60),d=h%60;return(p<=0?"+":"-")+I(m,2,"0")+":"+I(d,2,"0")},m:function $(p,h){if(p.date()<h.date())return-$(h,p);var m=12*(h.year()-p.year())+(h.month()-p.month()),d=p.clone().add(m,f),b=h-d<0,v=p.clone().add(m+(b?-1:1),f);return+(-(m+(h-d)/(b?d-v:v-d))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:f,y:E,w:l,d:u,D,h:c,m:a,s:o,ms:s,Q:_}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},F="en",H={};H[F]=R;var X=function($){return $ instanceof At},ot=function $(p,h,m){var d;if(!p)return F;if(typeof p=="string"){var b=p.toLowerCase();H[b]&&(d=b),h&&(H[b]=h,d=b);var v=p.split("-");if(!d&&v.length>1)return $(v[0])}else{var w=p.name;H[w]=p,d=w}return!m&&d&&(F=d),d||!m&&F},M=function($,p){if(X($))return $.clone();var h=typeof p=="object"?p:{};return h.date=$,h.args=arguments,new At(h)},T=Q;T.l=ot,T.i=X,T.w=function($,p){return M($,{locale:p.$L,utc:p.$u,x:p.$x,$offset:p.$offset})};var At=function(){function $(h){this.$L=ot(h.locale,null,!0),this.parse(h)}var p=$.prototype;return p.parse=function(h){this.$d=function(m){var d=m.date,b=m.utc;if(d===null)return new Date(NaN);if(T.u(d))return new Date;if(d instanceof Date)return new Date(d);if(typeof d=="string"&&!/Z$/i.test(d)){var v=d.match(S);if(v){var w=v[2]-1||0,L=(v[7]||"0").substring(0,3);return b?new Date(Date.UTC(v[1],w,v[3]||1,v[4]||0,v[5]||0,v[6]||0,L)):new Date(v[1],w,v[3]||1,v[4]||0,v[5]||0,v[6]||0,L)}}return new Date(d)}(h),this.$x=h.x||{},this.init()},p.init=function(){var h=this.$d;this.$y=h.getFullYear(),this.$M=h.getMonth(),this.$D=h.getDate(),this.$W=h.getDay(),this.$H=h.getHours(),this.$m=h.getMinutes(),this.$s=h.getSeconds(),this.$ms=h.getMilliseconds()},p.$utils=function(){return T},p.isValid=function(){return this.$d.toString()!==g},p.isSame=function(h,m){var d=M(h);return this.startOf(m)<=d&&d<=this.endOf(m)},p.isAfter=function(h,m){return M(h)<this.startOf(m)},p.isBefore=function(h,m){return this.endOf(m)<M(h)},p.$g=function(h,m,d){return T.u(h)?this[m]:this.set(d,h)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(h,m){var d=this,b=!!T.u(m)||m,v=T.p(h),w=function(at,N){var Z=T.w(d.$u?Date.UTC(d.$y,N,at):new Date(d.$y,N,at),d);return b?Z:Z.endOf(u)},L=function(at,N){return T.w(d.toDate()[at].apply(d.toDate("s"),(b?[0,0,0,0]:[23,59,59,999]).slice(N)),d)},C=this.$W,x=this.$M,V=this.$D,B="set"+(this.$u?"UTC":"");switch(v){case E:return b?w(1,0):w(31,11);case f:return b?w(1,x):w(0,x+1);case l:var gt=this.$locale().weekStart||0,yt=(C<gt?C+7:C)-gt;return w(b?V-yt:V+(6-yt),x);case u:case D:return L(B+"Hours",0);case c:return L(B+"Minutes",1);case a:return L(B+"Seconds",2);case o:return L(B+"Milliseconds",3);default:return this.clone()}},p.endOf=function(h){return this.startOf(h,!1)},p.$set=function(h,m){var d,b=T.p(h),v="set"+(this.$u?"UTC":""),w=(d={},d[u]=v+"Date",d[D]=v+"Date",d[f]=v+"Month",d[E]=v+"FullYear",d[c]=v+"Hours",d[a]=v+"Minutes",d[o]=v+"Seconds",d[s]=v+"Milliseconds",d)[b],L=b===u?this.$D+(m-this.$W):m;if(b===f||b===E){var C=this.clone().set(D,1);C.$d[w](L),C.init(),this.$d=C.set(D,Math.min(this.$D,C.daysInMonth())).$d}else w&&this.$d[w](L);return this.init(),this},p.set=function(h,m){return this.clone().$set(h,m)},p.get=function(h){return this[T.p(h)]()},p.add=function(h,m){var d,b=this;h=Number(h);var v=T.p(m),w=function(x){var V=M(b);return T.w(V.date(V.date()+Math.round(x*h)),b)};if(v===f)return this.set(f,this.$M+h);if(v===E)return this.set(E,this.$y+h);if(v===u)return w(1);if(v===l)return w(7);var L=(d={},d[a]=r,d[c]=i,d[o]=e,d)[v]||1,C=this.$d.getTime()+h*L;return T.w(C,this)},p.subtract=function(h,m){return this.add(-1*h,m)},p.format=function(h){var m=this,d=this.$locale();if(!this.isValid())return d.invalidDate||g;var b=h||"YYYY-MM-DDTHH:mm:ssZ",v=T.z(this),w=this.$H,L=this.$m,C=this.$M,x=d.weekdays,V=d.months,B=function(N,Z,Vt,Mt){return N&&(N[Z]||N(m,b))||Vt[Z].slice(0,Mt)},gt=function(N){return T.s(w%12||12,N,"0")},yt=d.meridiem||function(N,Z,Vt){var Mt=N<12?"AM":"PM";return Vt?Mt.toLowerCase():Mt},at={YY:String(this.$y).slice(-2),YYYY:this.$y,M:C+1,MM:T.s(C+1,2,"0"),MMM:B(d.monthsShort,C,V,3),MMMM:B(V,C),D:this.$D,DD:T.s(this.$D,2,"0"),d:String(this.$W),dd:B(d.weekdaysMin,this.$W,x,2),ddd:B(d.weekdaysShort,this.$W,x,3),dddd:x[this.$W],H:String(w),HH:T.s(w,2,"0"),h:gt(1),hh:gt(2),a:yt(w,L,!0),A:yt(w,L,!1),m:String(L),mm:T.s(L,2,"0"),s:String(this.$s),ss:T.s(this.$s,2,"0"),SSS:T.s(this.$ms,3,"0"),Z:v};return b.replace(P,function(N,Z){return Z||at[N]||v.replace(":","")})},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(h,m,d){var b,v=T.p(m),w=M(h),L=(w.utcOffset()-this.utcOffset())*r,C=this-w,x=T.m(this,w);return x=(b={},b[E]=x/12,b[f]=x,b[_]=x/3,b[l]=(C-L)/6048e5,b[u]=(C-L)/864e5,b[c]=C/i,b[a]=C/r,b[o]=C/e,b)[v]||C,d?x:T.a(x)},p.daysInMonth=function(){return this.endOf(f).$D},p.$locale=function(){return H[this.$L]},p.locale=function(h,m){if(!h)return this.$L;var d=this.clone(),b=ot(h,m,!0);return b&&(d.$L=b),d},p.clone=function(){return T.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},$}(),$e=At.prototype;return M.prototype=$e,[["$ms",s],["$s",o],["$m",a],["$H",c],["$W",u],["$M",f],["$y",E],["$D",D]].forEach(function($){$e[$[1]]=function(p){return this.$g(p,$[0],$[1])}}),M.extend=function($,p){return $.$i||($(p,At,M),$.$i=!0),M},M.locale=ot,M.isDayjs=X,M.unix=function($){return M(1e3*$)},M.en=H[F],M.Ls=H,M.p={},M})})(Qn);var Vc=Qn.exports;const Zc=ie(Vc);var Xn={exports:{}};(function(t,n){(function(e,r){t.exports=r()})(un,function(){var e="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var c=o.prototype;a.utc=function(g){var S={date:g,utc:!0,args:arguments};return new o(S)},c.utc=function(g){var S=a(this.toDate(),{locale:this.$L,utc:!0});return g?S.add(this.utcOffset(),e):S},c.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var u=c.parse;c.parse=function(g){g.utc&&(this.$u=!0),this.$utils().u(g.$offset)||(this.$offset=g.$offset),u.call(this,g)};var l=c.init;c.init=function(){if(this.$u){var g=this.$d;this.$y=g.getUTCFullYear(),this.$M=g.getUTCMonth(),this.$D=g.getUTCDate(),this.$W=g.getUTCDay(),this.$H=g.getUTCHours(),this.$m=g.getUTCMinutes(),this.$s=g.getUTCSeconds(),this.$ms=g.getUTCMilliseconds()}else l.call(this)};var f=c.utcOffset;c.utcOffset=function(g,S){var P=this.$utils().u;if(P(g))return this.$u?0:P(this.$offset)?f.call(this):this.$offset;if(typeof g=="string"&&(g=function(F){F===void 0&&(F="");var H=F.match(r);if(!H)return null;var X=(""+H[0]).match(i)||["-",0,0],ot=X[0],M=60*+X[1]+ +X[2];return M===0?0:ot==="+"?M:-M}(g),g===null))return this;var R=Math.abs(g)<=16?60*g:g,I=this;if(S)return I.$offset=R,I.$u=g===0,I;if(g!==0){var Q=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(I=this.local().add(R+Q,e)).$offset=R,I.$x.$localOffset=Q}else I=this.utc();return I};var _=c.format;c.format=function(g){var S=g||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return _.call(this,S)},c.valueOf=function(){var g=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*g},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var E=c.toDate;c.toDate=function(g){return g==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():E.call(this)};var D=c.diff;c.diff=function(g,S,P){if(g&&this.$u===g.$u)return D.call(this,g,S,P);var R=this.local(),I=a(g).local();return D.call(R,I,S,P)}}})})(Xn);var Jc=Xn.exports;const Qc=ie(Jc);var xt=(t=>(t.COMP="comp",t.CODE="code",t.DATA_SOURCE="data-source",t))(xt||{}),tr=(t=>(t.CODE="code",t))(tr||{});Zc.extend(Qc);const wu=(t="")=>t.replace(/\B([A-Z])/g,"-$1").toLowerCase(),bt=(t,n=[])=>{const e=[],r=function(i,s){if(!Array.isArray(s))return null;for(let o=0,a=s.length;o<a;o++){const c=s[o];if(e.push(c),"".concat(c.id)==="".concat(i))return c;if(c.items){const u=r(i,c.items);if(u)return u}e.pop()}return null};return r(t,n),e},be=t=>Object.prototype.toString.call(t)==="[object Object]",Xc=(t,n={})=>{const e=t.split("."),r=e.length;return e.reduce((i,s,o)=>{if(Object.prototype.toString.call(i)==="[object Object]"||Array.isArray(i))return i[s];if(r-1!==o)return{}},n)},Xt=(t,n=[])=>{const e=[],r=function(i,s){if(Array.isArray(s))for(let o=0,a=s.length;o<a;o++){const c=s[o],u=i.findIndex(l=>"".concat(l)==="".concat(c.id));u>-1&&(i.slice(u,1),e.push(c)),c.items&&r(i,c.items)}};return r(t,n),e},tu=(t={},n)=>Array.from(Object.values(t).reduce((e,r)=>{var i;return(((i=r[n])==null?void 0:i.keys)||[]).forEach(s=>e.add(s)),e},new Set)),en=(t={})=>Array.from(Object.values(t).reduce((n,e)=>(Object.keys(e).forEach(r=>{n.add(r)}),n),new Set)),re=(t,n,e)=>{var a;const r=bt(t.id,n),i=r.pop();let s=r.pop();if(e&&(s=bt(e,n).pop()),!i)throw new Error("未找到目标节点");if(!s)throw new Error("未找到父节点");const o=(a=s.items)==null?void 0:a.findIndex(c=>c.id===i.id);s.items.splice(o,1,t)},er=(t,n,e={},r)=>{let i=[];if(!r)i=tu(e,n.id);else{const o=e[r];i=(o==null?void 0:o[n.id].keys)||[]}const s="__magic__";return i.forEach(o=>{const a="".concat(o).split("."),c=a.length;a.reduce((u,l,f)=>{if(c-1===f){const _="".concat(s).concat(l);typeof u[_]>"u"&&(u[_]=u[l]);try{u[l]=t(u[_])}catch(E){console.error(E),u[l]=""}return u}return be(u)||Array.isArray(u)?u[l]:{}},n)}),Array.isArray(n.items)&&n.items.forEach(o=>er(t,o,e)),n},eu=(t,n,e,r)=>{var i,s;switch(t){case"is":if(!n)return!1;break;case"not":if(n)return!1;break;case"=":if(n!==e)return!1;break;case"!=":if(n===e)return!1;break;case">":if(n<=e)return!1;break;case">=":if(n<e)return!1;break;case"<":if(n>=e)return!1;break;case"<=":if(n>e)return!1;break;case"between":if(n<r[0]||n>r[1])return!1;break;case"not_between":if(n>=r[0]&&n<=r[1])return!1;break;case"include":if(typeof n<"u"&&!((i=n.includes)!=null&&i.call(n,e)))return!1;break;case"not_include":if(typeof n<"u"&&((s=n.includes)!=null&&s.call(n,e)))return!1;break}return!0},nr=t=>{const n={},e={string:"",object:{},array:[],boolean:!1,number:0,null:null,any:void 0};return t.forEach(r=>{if(typeof r.defaultValue<"u"){if(r.type==="array"&&!Array.isArray(r.defaultValue)){n[r.name]=e.array;return}if(r.type==="object"&&!be(r.defaultValue)){if(typeof r.defaultValue=="string"){try{n[r.name]=JSON.parse(r.defaultValue)}catch(i){n[r.name]=e.object}return}n[r.name]=e.object;return}n[r.name]=r.defaultValue;return}if(r.type==="object"){n[r.name]=r.fields?nr(r.fields):e.object;return}if(r.type){n[r.name]=e[r.type];return}n[r.name]=void 0}),n},nn="ds-field::";var Ft,wt,nt,Ot;class rr extends vn{constructor(e){var r,i,s,o;super();y(this,"isInit",!1);y(this,"data",{});y(this,"app");y(this,"mockData");z(this,Ft,"base");z(this,wt,void 0);z(this,nt,[]);z(this,Ot,[]);this.app=e.app,tt(this,wt,e.schema.id),this.setFields(e.schema.fields),this.setMethods(e.schema.methods||[]),this.app.platform==="editor"?(this.mockData=((i=(r=e.schema.mocks)==null?void 0:r.find(a=>a.useInEditor))==null?void 0:i.data)||this.getDefaultData(),this.setData(this.mockData)):typeof e.useMock=="boolean"&&e.useMock?(this.mockData=((o=(s=e.schema.mocks)==null?void 0:s.find(a=>a.enable))==null?void 0:o.data)||this.getDefaultData(),this.setData(this.mockData)):e.initialData?(this.setData(e.initialData),this.isInit=!0):this.setData(this.getDefaultData())}get id(){return U(this,wt)}get type(){return U(this,Ft)}get fields(){return U(this,nt)}get methods(){return U(this,Ot)}setFields(e){tt(this,nt,e)}setMethods(e){tt(this,Ot,e)}setData(e){this.data=e,this.emit("change")}getDefaultData(){return nr(U(this,nt))}async init(){this.isInit=!0}destroy(){this.data={},tt(this,nt,[]),this.removeAllListeners()}}Ft=new WeakMap,wt=new WeakMap,nt=new WeakMap,Ot=new WeakMap;const rn=t=>Object.entries(t).reduce((n,[e,r])=>{let i=r;return typeof r=="object"&&(i=JSON.stringify(r)),typeof r<"u"?"".concat(n).concat(n?"&":"").concat(globalThis.encodeURIComponent(e),"=").concat(globalThis.encodeURIComponent("".concat(i))):n},""),nu=async t=>{var l;const{url:n,method:e="GET",headers:r={},params:i={},data:s={},...o}=t,a=rn(i);let c=JSON.stringify(s);return(l=r["Content-Type"])!=null&&l.includes("application/x-www-form-urlencoded")&&(c=rn(s)),(await globalThis.fetch(a?"".concat(n,"?").concat(a):n,{method:e,headers:r,body:e==="GET"?void 0:c,...o})).json()};var ht,St,Tt,Ut;class ru extends rr{constructor(e){const{options:r}=e.schema;super(e);y(this,"isLoading",!1);y(this,"error");y(this,"schema");y(this,"httpOptions");z(this,ht,void 0);z(this,St,[]);z(this,Tt,[]);z(this,Ut,"http");this.schema=e.schema,this.httpOptions=r,typeof e.request=="function"?tt(this,ht,e.request):typeof globalThis.fetch=="function"&&tt(this,ht,nu),this.methods.forEach(i=>{typeof i.content=="function"&&(i.timing==="beforeRequest"&&U(this,St).push(i.content),i.timing==="afterRequest"&&U(this,Tt).push(i.content))})}get type(){return U(this,Ut)}async init(){this.schema.autoFetch&&await this.request(this.httpOptions),super.init()}async request(e={}){var i,s;this.isLoading=!0;let r={...this.httpOptions,...e};try{for(const a of U(this,St))await a({options:r,params:{},dataSource:this,app:this.app});typeof this.schema.beforeRequest=="function"&&(r=this.schema.beforeRequest(r,{app:this.app,dataSource:this}));let o=this.mockData?this.mockData:await((i=U(this,ht))==null?void 0:i.call(this,r));for(const a of U(this,Tt))await a({res:o,options:r,params:{},dataSource:this,app:this.app});if(typeof this.schema.afterResponse=="function"&&(o=this.schema.afterResponse(o,{app:this.app,dataSource:this,options:r})),(s=this.schema.responseOptions)!=null&&s.dataPath){const a=Xc(this.schema.responseOptions.dataPath,o);this.setData(a)}else this.setData(o);this.error=void 0}catch(o){this.error={msg:o.message},this.emit("error",o)}this.isLoading=!1}get(e){return this.request({...e,method:"GET"})}post(e){return this.request({...e,method:"POST"})}}ht=new WeakMap,St=new WeakMap,Tt=new WeakMap,Ut=new WeakMap;const ct=class ct extends vn{constructor({app:e,useMock:r,initialData:i}){var s,o;super();y(this,"app");y(this,"dataSourceMap",new Map);y(this,"data",{});y(this,"useMock",!1);this.app=e,this.useMock=r,i&&(this.data=i),(o=(s=e.dsl)==null?void 0:s.dataSources)==null||o.forEach(a=>{this.addDataSource(a)})}static registe(e,r){ct.dataSourceClassMap.set(e,r)}static getDataSourceClass(e){return ct.dataSourceClassMap.get(e)}async init(){await Promise.all(Array.from(this.dataSourceMap).map(async([,e])=>{if(e.isInit)return;const r=[],i=[];e.methods.forEach(s=>{typeof s.content=="function"&&(s.timing==="beforeInit"&&r.push(s.content),s.timing==="afterInit"&&i.push(s.content))});for(const s of r)await s({params:{},dataSource:e,app:this.app});await e.init();for(const s of i)await s({params:{},dataSource:e,app:this.app})}))}get(e){return this.dataSourceMap.get(e)}async addDataSource(e){if(!e)return;const r=ct.dataSourceClassMap.get(e.type)||rr,i=new r({app:this.app,schema:e,request:this.app.request,useMock:this.useMock,initialData:this.data[e.id]});this.dataSourceMap.set(e.id,i),this.data[i.id]=i.data,i.on("change",()=>{this.setData(i)}),this.init()}setData(e){Object.assign(this.data[e.id],e.data),this.emit("change",e.id)}removeDataSource(e){var r;(r=this.get(e))==null||r.destroy(),delete this.data[e],this.dataSourceMap.delete(e)}updateSchema(e){e.forEach(r=>{this.dataSourceMap.get(r.id)&&(this.removeDataSource(r.id),this.addDataSource(r))})}compiledNode(e,r){var i;return e.condResult===!1||e.visible===!1?e:er(s=>{if(typeof s=="string")return tn(s)(this.data);if(s!=null&&s.isBindDataSource&&s.dataSourceId)return this.data[s.dataSourceId];if(s!=null&&s.isBindDataSourceField&&s.dataSourceId&&typeof s.template=="string")return tn(s.template)(this.data[s.dataSourceId]);if(Array.isArray(s)&&typeof s[0]=="string"){const[o,...a]=s,c=o.indexOf(nn);if(c>-1){const u=o.substring(c+nn.length),l=this.data[u];return l?a.reduce((f,_)=>Array.isArray(f)?f:be(f)?f[_]:"",l):s}}return s},Yn(e),((i=this.app.dsl)==null?void 0:i.dataSourceDeps)||{},r)}compliedConds(e){if(!e.displayConds||!Array.isArray(e.displayConds)||!e.displayConds.length)return!0;for(const{cond:r}of e.displayConds){if(!r)continue;let i=!0;for(const{op:s,value:o,range:a,field:c}of r){const[u,l]=c,f=this.data[u];if(!f||!l)break;const _=f[l];if(!eu(s,_,o,a)){i=!1;break}}if(i)return!0}return!1}destroy(){this.removeAllListeners(),this.data={},this.dataSourceMap.forEach(e=>{e.destroy()}),this.dataSourceMap.clear()}};y(ct,"dataSourceClassMap",new Map);let Rt=ct;Rt.registe("http",ru);const ir=Rt,iu=(t,n,e)=>{const{dsl:r,platform:i}=t;if(!(r!=null&&r.dataSources))return;const s=new ir({app:t,useMock:n,initialData:e});return r.dataSources&&r.dataSourceCondDeps&&i!=="editor"&&Xt(en(r.dataSourceCondDeps),r.items).forEach(o=>{o.condResult=s.compliedConds(o),re(o,r.items)}),r.dataSources&&r.dataSourceDeps&&Xt(en(r.dataSourceDeps),r.items).forEach(o=>{re(s.compiledNode(o),r.items)}),t.jsEngine!=="nodejs"&&s.on("change",o=>{var l,f;const a=((l=r.dataSourceDeps)==null?void 0:l[o])||{},c=((f=r.dataSourceCondDeps)==null?void 0:f[o])||{},u=Kc([...Object.keys(c),...Object.keys(a)]);s.emit("update-data",Xt(u,r.items).map(_=>{const E=Yn(_);return E.condResult=s.compliedConds(_),s.compiledNode(E)}),o)}),s};class su{constructor(n=globalThis.navigator.userAgent,e={}){y(this,"isIos",!1);y(this,"isIphone",!1);y(this,"isIpad",!1);y(this,"isAndroid",!1);y(this,"isAndroidPad",!1);y(this,"isMac",!1);y(this,"isWin",!1);y(this,"isMqq",!1);y(this,"isWechat",!1);y(this,"isWeb",!1);this.isIphone=n.indexOf("iPhone")>=0,this.isIpad=/(iPad).*OS\s([\d_]+)/.test(n),this.isIos=this.isIphone||this.isIpad,this.isAndroid=n.indexOf("Android")>=0,this.isAndroidPad=this.isAndroid&&n.indexOf("Mobile")<0,this.isMac=n.indexOf("Macintosh")>=0,this.isWin=n.indexOf("Windows")>=0,this.isMqq=/QQ\/([\d.]+)/.test(n),this.isWechat=n.indexOf("MicroMessenger")>=0&&n.indexOf("wxwork")<0,this.isWeb=!this.isIos&&!this.isAndroid&&!/(WebOS|BlackBerry)/.test(n),Object.entries(e).forEach(([r,i])=>{this[r]=i})}}const sn=su,on="magic:common:events:",sr="magic:common:actions:",Dt={SHOW:"show",HIDE:"hide",SCROLL_TO_VIEW:"scrollIntoView",SCROLL_TO_TOP:"scrollToTop"},ou=t=>t.startsWith(on)?t:"".concat(on).concat(t),au=t=>t.startsWith(sr),or=(t,n)=>{var r;if(!t)return!1;if(!t.id)return or(t.parentElement,n);const e=(r=n.page)==null?void 0:r.getNode(t.id);return e||!1},an=(t,n,e)=>{const r=or(e.target,t);r&&t.emit(ou(n),r)},cu=t=>{t.jsEngine==="browser"&&(window.document.body.addEventListener("click",n=>{an(t,"click",n)}),window.document.body.addEventListener("click",n=>{an(t,"click:capture",n)},!0))},uu=(t,n)=>{var r;const{instance:e}=n;if(e)switch(t.replace(sr,"")){case Dt.SHOW:e.show();break;case Dt.HIDE:e.hide();break;case Dt.SCROLL_TO_VIEW:(r=e.$el)==null||r.scrollIntoView({behavior:"smooth"});break;case Dt.SCROLL_TO_TOP:window.scrollTo({top:0,behavior:"smooth"});break}};class fu{constructor(){y(this,"data",{})}set(n,e){this.data[n]=e}get(n){return this.data[n]}}class hu extends oe.EventEmitter{constructor(e){super();y(this,"data");y(this,"style");y(this,"events");y(this,"instance");y(this,"page");y(this,"parent");y(this,"app");y(this,"store",new fu);this.page=e.page,this.parent=e.parent,this.app=e.app;const{events:r}=e.config;this.data=e.config,this.events=r||[],this.listenLifeSafe()}setData(e){this.data=e,this.emit("updata-data")}destroy(){this.removeAllListeners()}listenLifeSafe(){this.once("created",async e=>{this.once("destroy",()=>{this.instance=null,typeof this.data.destroy=="function"&&this.data.destroy(this),this.listenLifeSafe()}),this.instance=e,await this.runCodeBlock("created")}),this.once("mounted",async e=>{this.instance=e;const r=this.app.eventQueueMap[e.config.id]||[];for(let i=r.shift();i;i=r.shift())this.app.compActionHandler(i.eventConfig,i.fromCpt,i.args);await this.runCodeBlock("mounted")})}async runCodeBlock(e){var r,i,s;if(typeof this.data[e]=="function"){await this.data[e](this);return}if(!(((r=this.data[e])==null?void 0:r.hookType)!==tr.CODE||Vn(this.app.codeDsl)))for(const o of this.data[e].hookData){const{codeId:a,params:c={}}=o,u=(s=(i=this.app.codeDsl)==null?void 0:i[a])==null?void 0:s.content;typeof u=="function"&&await u({app:this.app,params:c})}}}const cn=hu;class du extends cn{constructor(e){super(e);y(this,"nodes",new Map);this.setNode(e.config.id,this),this.initNode(e.config,this)}initNode(e,r){var s;const i=new cn({config:e,parent:r,page:this,app:this.app});this.setNode(e.id,i),(s=e.items)==null||s.forEach(o=>{this.initNode(o,i)})}getNode(e){return this.nodes.get(e)}setNode(e,r){this.nodes.set(e,r)}deleteNode(e){this.nodes.delete(e)}destroy(){super.destroy(),this.nodes.clear()}}const lu=du,pu=t=>{if(typeof t!="string")return t;const n={};return t.split(";").forEach(e=>{if(!e)return;const r=e.split(":");let i=r.shift(),s=r.join(":");i&&(i=i.replace(/^\s*/,"").replace(/\s*$/,""),s=s.replace(/^\s*/,"").replace(/\s*$/,""),i=i.split("-").map((o,a)=>a>0?"".concat(o[0].toUpperCase()).concat(o.substr(1)):o).join(""),n[i]=s)}),n},gu=t=>t&&!/^url/.test(t)&&!/^linear-gradient/.test(t)?"url(".concat(t,")"):t,yu=t=>/^(-?\d+)(\.\d+)?$/.test(t);class mu extends oe.EventEmitter{constructor(e){var r;super();y(this,"env",new sn);y(this,"dsl");y(this,"codeDsl");y(this,"dataSourceManager");y(this,"page");y(this,"useMock",!1);y(this,"platform","mobile");y(this,"jsEngine","browser");y(this,"designWidth",375);y(this,"request");y(this,"components",new Map);y(this,"eventQueueMap",{});y(this,"eventList",new Map);this.setEnv(e.ua),this.codeDsl=(r=e.config)==null?void 0:r.codeBlocks,e.platform&&(this.platform=e.platform),e.jsEngine&&(this.jsEngine=e.jsEngine),typeof e.useMock=="boolean"&&(this.useMock=e.useMock),typeof e.designWidth<"u"&&this.setDesignWidth(e.designWidth),e.transformStyle&&(this.transformStyle=e.transformStyle),e.request&&(this.request=e.request),e.config&&this.setConfig(e.config,e.curPage),cu(this)}setEnv(e){this.env=new sn(e)}setDesignWidth(e){this.designWidth=e,this.jsEngine==="browser"&&(this.calcFontsize(),globalThis.removeEventListener("resize",this.calcFontsize),globalThis.addEventListener("resize",this.calcFontsize))}transformStyle(e){if(!e)return{};let r={};const i={};typeof e=="string"?r=pu(e):r={...e};const s=this.jsEngine==="hippy",o=["zIndex","opacity","fontWeight"];return Object.entries(r).forEach(([a,c])=>{a==="scale"&&!i.transform&&s?i.transform=[{scale:c}]:a==="backgroundImage"&&!s?c&&(i[a]=gu(c)):a==="transform"&&typeof c!="string"?i[a]=this.getTransform(c):!o.includes(a)&&c&&/^[-]?[0-9]*[.]?[0-9]*$/.test(c)?i[a]=s?c:"".concat(c/100,"rem"):i[a]=c}),i}setConfig(e,r){var i,s;this.dsl=e,!r&&e.items.length&&(r=e.items[0].id),this.dataSourceManager&&this.dataSourceManager.destroy(),this.dataSourceManager=iu(this,this.useMock),this.codeDsl=e.codeBlocks,this.setPage(r||((s=(i=this.page)==null?void 0:i.data)==null?void 0:s.id))}addPage(){console.info("addPage 已经弃用")}setPage(e){var i,s;const r=(i=this.dsl)==null?void 0:i.items.find(o=>"".concat(o.id)==="".concat(e));if(!r){this.page&&(this.page.destroy(),this.page=void 0),super.emit("page-change");return}r!==((s=this.page)==null?void 0:s.data)&&(this.page&&this.page.destroy(),this.page=new lu({config:r,app:this}),super.emit("page-change",this.page),this.bindEvents())}deletePage(){this.page=void 0}getPage(e){if(!e)return this.page;if(this.page&&"".concat(this.page.data.id)==="".concat(e))return this.page}registerComponent(e,r){this.components.set(e,r)}unregisterComponent(e){this.components.delete(e)}resolveComponent(e){return this.components.get(e)}bindEvents(){var e;if(Array.from(this.eventList.keys()).forEach(r=>{const i=this.eventList.get(r);i&&this.off(i,r)}),this.eventList.clear(),!!this.page)for(const[,r]of this.page.nodes)(e=r.events)==null||e.forEach(i=>{const s="".concat(i.name,"_").concat(r.data.id),o=(a,...c)=>{this.eventHandler(i,a,c)};this.eventList.set(o,s),this.on(s,o)})}emit(e,r,...i){var s;return(s=r==null?void 0:r.data)!=null&&s.id?super.emit("".concat(String(e),"_").concat(r.data.id),r,...i):super.emit(e,r,...i)}async codeActionHandler(e,r){var o;const{codeId:i="",params:s={}}=e;!i||Vn(this.codeDsl)||this.codeDsl[i]&&typeof((o=this.codeDsl[i])==null?void 0:o.content)=="function"&&await this.codeDsl[i].content({app:this,params:s,eventParams:r})}async compActionHandler(e,r,i){if(!this.page)throw new Error("当前没有页面");const{method:s,to:o}=e,a=this.page.getNode(o);if(!a)throw"ID为".concat(o,"的组件不存在");if(au(s))return uu(s,a);a.instance?typeof a.instance[s]=="function"&&await a.instance[s](r,...i):this.addEventToMap({eventConfig:e,fromCpt:r,args:i})}async dataSourceActionHandler(e,r){var f;const{dataSourceMethod:i=[],params:s={}}=e,[o,a]=i;if(!o||!a)return;const c=(f=this.dataSourceManager)==null?void 0:f.get(o);if(!c)return;const l=(c.methods||[]).find(_=>_.name===a);l&&typeof l.content=="function"&&await l.content({app:this,params:s,dataSource:c,eventParams:r})}destroy(){this.removeAllListeners(),this.page=void 0,this.jsEngine==="browser"&&globalThis.removeEventListener("resize",this.calcFontsize)}async eventHandler(e,r,i){if(bc(e,"actions")){const{actions:s}=e;for(const o of s)o.actionType===xt.COMP?await this.compActionHandler(o,r,i):o.actionType===xt.CODE?await this.codeActionHandler(o,i):o.actionType===xt.DATA_SOURCE&&await this.dataSourceActionHandler(o,i)}else await this.compActionHandler(e,r,i)}addEventToMap(e){this.eventQueueMap[e.eventConfig.to]?this.eventQueueMap[e.eventConfig.to].push(e):this.eventQueueMap[e.eventConfig.to]=[e]}getTransform(e){if(!e)return[];const r=Object.entries(e).map(([s,o])=>o.trim()?(s==="rotate"&&yu(o)&&(o="".concat(o,"deg")),this.jsEngine!=="hippy"?"".concat(s,"(").concat(o,")"):{[s]:o}):"");if(this.jsEngine==="hippy")return r;const i=r.join(" ");return i.trim()?i:"none"}calcFontsize(){const{width:e}=document.documentElement.getBoundingClientRect(),r=e/(this.designWidth/100);document.documentElement.style.fontSize="".concat(r,"px")}}const vu=mu,bu=Vue.defineComponent({__name:"App",setup(t){var o;const n=Vue.inject("app"),e=Vue.ref(),r=Vue.ref(),i=Vue.ref(),s=Vue.computed(()=>{var a,c,u,l;return((c=(a=e.value)==null?void 0:a.items)==null?void 0:c.find(f=>f.id===r.value))||((l=(u=e.value)==null?void 0:u.items)==null?void 0:l[0])});return Vue.watch(s,async()=>{await Vue.nextTick();const a=document.querySelector(".magic-ui-page");a&&window.magic.onPageElUpdate(a)}),(o=window.magic)==null||o.onRuntimeReady({getApp(){return n},updateRootConfig(a){e.value=a,n==null||n.setConfig(a,r.value)},updatePageId(a){r.value=a,n==null||n.setPage(a)},select(a){var u;i.value=a,n!=null&&n.getPage(a)&&((u=this.updatePageId)==null||u.call(this,a));const c=document.getElementById("".concat(a));return c||Vue.nextTick().then(()=>document.getElementById("".concat(a)))},add({config:a,parentId:c}){var l,f,_,E,D;if(!e.value)throw new Error("error");if(!i.value)throw new Error("error");if(!c)throw new Error("error");const u=bt(c,[e.value]).pop();if(!u)throw new Error("未找到父节点");if(a.type!=="page"){const g=(l=n==null?void 0:n.page)==null?void 0:l.getNode(u.id);g&&((f=n==null?void 0:n.page)==null||f.initNode(a,g))}if(u.id!==i.value){const g=(_=u.items)==null?void 0:_.findIndex(S=>S.id===i.value);(E=u.items)==null||E.splice(g+1,0,a)}else(D=u.items)==null||D.push(a)},update({config:a,parentId:c}){var f,_;if(!e.value||!n)throw new Error("error");const u=((f=n.dataSourceManager)==null?void 0:f.compiledNode(a))||a;re(Vue.reactive(u),[e.value],c);const l=(_=n.page)==null?void 0:_.getNode(a.id);l&&l.setData(a)},remove({id:a,parentId:c}){var _,E;if(!e.value)throw new Error("error");const u=bt(a,[e.value]).pop();if(!u)throw new Error("未找到目标元素");const l=bt(c,[e.value]).pop();if(!l)throw new Error("未找到父元素");u.type==="page"?n==null||n.deletePage():(_=n==null?void 0:n.page)==null||_.deleteNode(u.id);const f=(E=l.items)==null?void 0:E.findIndex(D=>D.id===u.id);l.items.splice(f,1)}}),(a,c)=>{const u=Vue.resolveComponent("magic-ui-page");return s.value?(Vue.openBlock(),Vue.createBlock(u,{key:s.value.id,config:s.value},null,8,["config"])):Vue.createCommentVNode("",!0)}}});Promise.all([Zt(()=>import("./comp-entry-128ead6c.js"),[]),Zt(()=>import("./plugin-entry-024afdea.js"),[]),Zt(()=>import("./datasource-entry-0f1044b8.js"),[])]).then(([t,n,e])=>{const r=Vue.createApp(bu);Object.entries(t.default).forEach(([s,o])=>{r.component("magic-ui-".concat(s),o)}),Object.entries(e).forEach(([s,o])=>{ir.registe(s,o)}),Object.values(n.default).forEach(s=>{r.use(s)});const i=new vu({ua:window.navigator.userAgent,platform:"editor"});i.env.isWeb&&i.setDesignWidth(window.document.documentElement.getBoundingClientRect().width),window.appInstance=i,r.config.globalProperties.app=i,r.provide("app",i),r.mount("#app")});export{_u as __vite_legacy_guard,wu as t};
//# sourceMappingURL=index-64c728ae.js.map
